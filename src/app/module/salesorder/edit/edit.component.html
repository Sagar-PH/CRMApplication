<div class="so-edit-page" *ngIf="requested_data">

    <!-- Header -->
    <div class="page-header">
        <h2>Edit Sales Order</h2>
        <span class="so-id">SO #{{ requested_data.row_id }}</span>
    </div>

    <!-- Form -->
    <form #SOEditForm="ngForm" (ngSubmit)="SalesOrderEditSubmit(SOEditForm)" novalidate class="so-form">

        <!-- Hidden ID -->
        <input type="hidden" name="orderId" [(ngModel)]="requested_data.row_id" />

        <!-- Order Details -->
        <h3 class="section-title">Order Details</h3>

        <div class="form-grid">

            <div class="form-group">
                <input type="text" name="customerId" [(ngModel)]="requested_data.CustomerId" ngModel hidden/>

                <label>Customer Account ID *</label>
                <select name="selectedCustomer" [(ngModel)]="selectedCustomer" (ngModelChange)="customerIdChange($event, SOEditForm)">
                    <option *ngFor="let customer of customers_list" [ngValue]="customer">{{customer.row_id}}</option>
                </select>

                <!-- <input type="text" name="accountId" [(ngModel)]="requested_data.AccountId" required
                    placeholder="Enter customer account ID" /> -->
            </div>

            <div class="form-group">
                <label>Customer Name *</label>
                <input type="text" name="customerName" [(ngModel)]="requested_data.CustomerName" required
                    placeholder="Enter Customer Name" readonly/>
            </div>

            <!-- <div class="form-group">
                <label>Contact ID</label>
                <input type="text" name="contactId" [(ngModel)]="requested_data.ContactId"
                    placeholder="Enter contact ID" />
            </div> -->

            <div class="form-group">
                <label>Order Date</label>
                <input type="date" name="orderDate" [(ngModel)]="requested_data.OrderDate" />
            </div>

            <div class="form-group">
                <label>Expected Delivery</label>
                <input type="date" name="deliveryDate" [(ngModel)]="requested_data.ExpectedDelivery" />
            </div>

            <div class="form-group">
                <label>Status</label>
                <select name="status" [(ngModel)]="requested_data.Status">
                    <option value="Draft">Draft</option>
                    <option value="Approved">Approved</option>
                    <option value="Delivered">Delivered</option>
                    <option value="Cancelled">Cancelled</option>
                </select>
            </div>

        </div>

        <!-- Order Item -->
        <h3 class="section-title">Order Item</h3>

        <div class="form-grid">
            <input type="text" name="productId" [(ngModel)]="requested_data.ProductId" ngModel hidden />

            <div class="form-group">
                <label>Product ID</label>
                <select name="selectedProduct" [(ngModel)]="selectedProduct"
                    (ngModelChange)="productIdChange($event, SOEditForm)">
                    <option *ngFor="let product of products_list" [ngValue]="product">
                        {{ product.row_id }}
                    </option>
                </select>
            </div>

            <div class="form-group">
                <label>Product Name</label>
                <input type="text" name="productName" [(ngModel)]="requested_data.ProductName" readonly />
            </div>


            <div class="form-group">
                <label>Quantity</label>
                <input type="number" name="quantity" [(ngModel)]="requested_data.Quantity" min="1"
                    (ngModelChange)="productQuantityChange($event, SOEditForm)" />
            </div>

            <div class="form-group">
                <label>Total Amount</label>
                <input type="number" name="totalAmount" [(ngModel)]="requested_data.TotalAmount" min="0" readonly />
            </div>

        </div>

        <!-- Actions -->
        <div class="form-actions">
            <button type="submit" class="btn-primary" [disabled]="SOEditForm.invalid">
                Save Changes
            </button>
            <a href="/salesorder/view" class="btn-secondary">Cancel</a>
        </div>

    </form>
</div>