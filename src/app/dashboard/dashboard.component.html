<main class="main-content">
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;600;700&display=swap"
        rel="stylesheet">
    <header>
        <div>
            <h1 style="font-size: 1.8rem; font-weight: 800;">Business Overview</h1>
            <p style="color: #6b7280;">Financial performance for <span  style="font-weight: bold;">{{year}} - {{monthName}}</span></p>
        </div>
        <input type="text" class="search-bar" placeholder="Search analytics...">
    </header>

    <div class="dashboard-grid">
        <div class="white-card">
            <p class="kpi-label">Revenue</p>
            <p class="kpi-value">₹{{total_revenue}}</p>
            <span *ngIf="revenue_growth > 0" class="growth-pill up">↑ {{revenue_growth}}%</span>
            <span *ngIf="revenue_growth < 0" class="growth-pill down">↓ {{Math.abs(revenue_growth)}}%</span>
        </div>
        <div class="white-card">
            <p class="kpi-label">Sales</p>
            <p class="kpi-value">{{total_sales}}</p>
            <span *ngIf="sales_growth > 0" class="growth-pill up">↑ {{sales_growth}}%</span>
            <span *ngIf="sales_growth < 0" class="growth-pill down">↓ {{Math.abs(sales_growth)}}%</span>
        </div>
        <div class="white-card">
            <p class="kpi-label">Purchases</p>
            <p class="kpi-value">₹{{total_purchase}}</p>
            <span *ngIf="purchase_growth > 0" class="growth-pill up">↑ {{purchase_growth}}%</span>
            <span *ngIf="purchase_growth < 0" class="growth-pill down">↓ {{Math.abs(purchase_growth)}}%</span>
        </div>

        <div class="white-card chart-span-2">
            <h3 style="margin-bottom: 1.5rem;">Sales and Purchase Analytics</h3>
            <div style="height: 300px;"><canvas id="lightLineChart"></canvas></div>
        </div>
        <div class="white-card">
            <h3 style="margin-bottom: 1.5rem;">Task Progress Overview</h3>
            <div style="height: 300px;"><canvas id="lightDonutChart"></canvas></div>
        </div>

        <div class="featured-banner" *ngIf="featured_product_revenue > 0">
            <div style="flex: 1;">
                <p class="kpi-label">Featured Product by Revenue</p>
                <h2 style="font-size: 2rem; margin: 10px 0;">{{featured_product}}</h2>
                <p>Contributing {{featured_product_revenue}}% of total monthly revenue.</p>
                <div style="width: 300px;">
                    <div class="progress-bar-bg">
                        <div class="progress-bar-fill" [style.width.%]="featured_product_revenue"></div>
                    </div>
                </div>
            </div>
            <div style="text-align: right;">
                <p style="font-size: 2.5rem; font-weight: 800;">{{featured_product_revenue_collected}}</p>
                <p>Product Revenue</p>
            </div>
        </div>
    </div>
</main>